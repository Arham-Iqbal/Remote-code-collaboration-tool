{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useLocation}from\"react-router-dom\";import{FaRocketchat}from\"react-icons/fa\";import toast from\"react-hot-toast\";import socket from\"./Socket\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=()=>{const location=useLocation();const[chat,setChat]=useState(false);const[message,setMessage]=useState(\"\");const[messages,setMessages]=useState([]);const{username,roomid}=location.state||{};const openChat=()=>setChat(true);const closeChat=()=>setChat(false);const sendMessage=()=>{if(message.trim()){socket.emit(\"message\",{message,username,roomid});setMessages(prevMessages=>[...prevMessages,{message,username}]);setMessage(\"\");toast.success(\"Message sent\");}};const handleInputChange=e=>setMessage(e.target.value);useEffect(()=>{socket.on(\"new-message\",data=>{setMessages(prevMessages=>[...prevMessages,data]);if(data.username!==username){toast.success(`Message received from ${data.username}`);}});return()=>socket.off(\"new-message\");},[roomid,username]);const[position,setPosition]=useState({x:0,y:0});const handleDrag=e=>{setPosition({x:e.clientX-e.target.offsetWidth/2,y:e.clientY-e.target.offsetHeight/2});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 relative\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:openChat,className:\"flex items-center px-5 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 hover:shadow-lg transition duration-300 transform hover:scale-105\",children:[/*#__PURE__*/_jsx(FaRocketchat,{className:\"mr-2 text-xl\"}),\" Open Chat\"]}),chat&&/*#__PURE__*/_jsxs(\"div\",{style:{left:`${position.x}px`,top:`${position.y}px`},className:\"fixed bg-white rounded-lg w-72 h-96 p-4 shadow-xl z-50 cursor-move transition-transform duration-300\",draggable:true,onDragEnd:handleDrag,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-blue-800\",children:\"Chat Room\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeChat,className:\"text-red-500 hover:text-red-600 text-xl\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 h-52 overflow-y-auto border border-gray-300 rounded p-3 bg-gray-50\",children:messages.length?messages.map((msg,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"strong\",{className:\"text-blue-600\",children:[msg.username,\":\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:msg.message})]},index)):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-center\",children:\"No messages yet\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Write a message...\",value:message,onChange:handleInputChange,className:\"w-full border border-gray-300 rounded p-2 mb-3 text-black focus:outline-none focus:ring-2 focus:ring-blue-400\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,className:\"w-full bg-green-500 text-white font-bold rounded py-2 hover:bg-green-600 transition duration-300\",children:\"Send\"})]})]});};export default Chat;","map":{"version":3,"names":["React","useEffect","useState","useLocation","FaRocketchat","toast","socket","jsx","_jsx","jsxs","_jsxs","Chat","location","chat","setChat","message","setMessage","messages","setMessages","username","roomid","state","openChat","closeChat","sendMessage","trim","emit","prevMessages","success","handleInputChange","e","target","value","on","data","off","position","setPosition","x","y","handleDrag","clientX","offsetWidth","clientY","offsetHeight","className","children","onClick","style","left","top","draggable","onDragEnd","length","map","msg","index","type","placeholder","onChange"],"sources":["C:/Users/iarha/OneDrive/Desktop/React mini/mega project/remotre code collab/Client/src/components/Chat.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { FaRocketchat } from \"react-icons/fa\";\r\nimport toast from \"react-hot-toast\";\r\nimport socket from \"./Socket\";\r\n\r\nconst Chat = () => {\r\n  const location = useLocation();\r\n  const [chat, setChat] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const { username, roomid } = location.state || {};\r\n\r\n  const openChat = () => setChat(true);\r\n  const closeChat = () => setChat(false);\r\n\r\n  const sendMessage = () => {\r\n    if (message.trim()) {\r\n      socket.emit(\"message\", { message, username, roomid });\r\n      setMessages((prevMessages) => [...prevMessages, { message, username }]);\r\n      setMessage(\"\");\r\n      toast.success(\"Message sent\");\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => setMessage(e.target.value);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"new-message\", (data) => {\r\n      setMessages((prevMessages) => [...prevMessages, data]);\r\n      if (data.username !== username) {\r\n        toast.success(`Message received from ${data.username}`);\r\n      }\r\n    });\r\n    return () => socket.off(\"new-message\");\r\n  }, [roomid, username]);\r\n\r\n  const [position, setPosition] = useState({ x: 0, y: 0 });\r\n\r\n  const handleDrag = (e) => {\r\n    setPosition({\r\n      x: e.clientX - e.target.offsetWidth / 2,\r\n      y: e.clientY - e.target.offsetHeight / 2,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 relative\">\r\n      <button\r\n        onClick={openChat}\r\n        className=\"flex items-center px-5 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 hover:shadow-lg transition duration-300 transform hover:scale-105\"\r\n      >\r\n        <FaRocketchat className=\"mr-2 text-xl\" /> Open Chat\r\n      </button>\r\n\r\n      {chat && (\r\n        <div\r\n          style={{ left: `${position.x}px`, top: `${position.y}px` }}\r\n          className=\"fixed bg-white rounded-lg w-72 h-96 p-4 shadow-xl z-50 cursor-move transition-transform duration-300\"\r\n          draggable\r\n          onDragEnd={handleDrag}\r\n        >\r\n          <div className=\"flex justify-between items-center mb-4\">\r\n            <h2 className=\"text-lg font-semibold text-blue-800\">Chat Room</h2>\r\n            <button\r\n              onClick={closeChat}\r\n              className=\"text-red-500 hover:text-red-600 text-xl\"\r\n            >\r\n              Ã—\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"mb-4 h-52 overflow-y-auto border border-gray-300 rounded p-3 bg-gray-50\">\r\n            {messages.length ? (\r\n              messages.map((msg, index) => (\r\n                <div key={index} className=\"mb-2\">\r\n                  <strong className=\"text-blue-600\">{msg.username}:</strong>\r\n                  <p className=\"text-gray-700\">{msg.message}</p>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              <p className=\"text-gray-400 text-center\">No messages yet</p>\r\n            )}\r\n          </div>\r\n\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Write a message...\"\r\n            value={message}\r\n            onChange={handleInputChange}\r\n            className=\"w-full border border-gray-300 rounded p-2 mb-3 text-black focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n          />\r\n\r\n          <button\r\n            onClick={sendMessage}\r\n            className=\"w-full bg-green-500 text-white font-bold rounded py-2 hover:bg-green-600 transition duration-300\"\r\n          >\r\n            Send\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}